<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>我的第一个网页</title>
</head>
<body>

<h1 id="greeting">你好，这是我的第一个网页！</h1>

<script>
    // 页面加载完成后执行
    window.addEventListener("DOMContentLoaded", () => {
        const greetingEl = document.getElementById("greeting");

        fetch("https://ipapi.co/json/")
            .then(response => {
                if (!response.ok) {
                    throw new Error("网络请求失败");
                }
                return response.json();
            })
            .then(data => {
                const city = data.city;
                if (city) {
                    greetingEl.textContent = `你好，来自${city}的朋友！`;
                } else {
                    greetingEl.textContent = "你好，来自远方的朋友！";
                }
            })
            .catch(error => {
                console.error(error);
                greetingEl.textContent = "你好，来自远方的朋友！";
            });
    });
</script>

</body>
</html>
